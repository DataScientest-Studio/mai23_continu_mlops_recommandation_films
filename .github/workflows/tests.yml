name: Unitary test

on:
  push:
    branches:
      - main
  pull_request:

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout le code
        uses: actions/checkout@v3



          
      - name: Display rep
        run : |
         pwd
         ls -l
         ls -l data/loaded_api_datasets/kneighbors_results.npy
         
      - name: Install dependency
        run: |
          pip install --upgrade pip
          sed -i '/scikit-surprise==1.1.2/d' api/requirements.txt 
          sed -i '/scikit-surprise==1.1.3/d' api/requirements.txt 

          pip install --use-pep517 -r api/requirements.txt

      - name: Ex√©cution des tests unitaires
        run: pytest test_api.py

